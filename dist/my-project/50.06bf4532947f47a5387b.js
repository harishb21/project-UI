"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[50],{50:(vt,U,l)=>{l.r(U),l.d(U,{UsersModule:()=>_t});var g=l(8583),d=l(8295),h=l(9983),i=l(3679),T=l(1841),A=l(7556),y=l(6215),f=l(1359),t=l(7716),b=l(7001);let _=(()=>{class o{constructor(e,r){this.http=e,this._snackBar=r,this.roles=new y.X([]),this.loadData()}loadData(){this.http.get(`${f.t.SERVER_URL}/roles/`).subscribe(e=>{console.log("Response Created"),this.roles.next(e)},e=>{console.error("Error Occured"),console.error(e)})}addEmployee(e){console.log("INSNIDE addEmployee"),this.http.post(`${f.t.SERVER_URL}/users/employees/`,e).subscribe(r=>{console.log("Response Created"),this._snackBar.open(null==r?void 0:r.message),console.log(r)},r=>{console.error("Error Occured"),console.error(r)})}addPatient(e){console.log(e),this.http.post(`${f.t.SERVER_URL}/users/patients/`,e).subscribe(r=>{console.log("Response Created"),this._snackBar.open(null==r?void 0:r.message),console.log(r)},r=>{console.error("Error Occured"),console.error(r)})}signupPatient(e){console.log(e),this.http.post(`${f.t.SERVER_URL}/users/patients/signup/`,e).subscribe(r=>{console.log("Response Created"),this._snackBar.open(null==r?void 0:r.message),console.log(r)},r=>{console.error("Error Occured"),console.error(r)})}validateBirthDate(e){return null===e.value||(new Date).getTime()>new Date(e.value).getTime()?null:{futureDate:{valid:!1}}}mustMatch(e,r){return n=>{const p=n.controls[r];p.errors&&p.errors.mustMatch||p.setErrors(n.controls[e].value!==p.value?{mustMatch:!0}:null)}}getUserByEmail(e){return this.http.get(`${f.t.SERVER_URL}/auth/valid/${e}`)}updatePasssword(e,r,n){return this.http.post(`${f.t.SERVER_URL}/auth/update`,{email:e.email,oldPassword:r,newPassword:n})}forgetPassword(e){return this.http.post(`${f.t.SERVER_URL}/auth/forget`,{email:e})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(T.eN),t.LFG(b.ux))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var C=l(7441),M=l(5939),E=l(4929),u=l(3738),v=l(1095),N=l(6627),S=l(2522),Z=l(1769),w=l(2613),D=l(3220),I=l(4655),s=l(1024),x=l(7453);function F(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorMessage)}}function J(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorEmail()," ")}}function Q(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errorPassword(),"")}}function B(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-form-field",5),t.TgZ(1,"mat-label"),t._uU(2,"Password"),t.qZA(),t._UZ(3,"input",10),t.TgZ(4,"button",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.hidePwd=!n.hidePwd}),t.TgZ(5,"mat-icon"),t._uU(6),t.qZA(),t.qZA(),t.YNc(7,Q,2,1,"mat-error",4),t._UZ(8,"mat-hint"),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("type",e.hidePwd?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",e.hidePwd),t.xp6(2),t.Oqu(e.hidePwd?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",e.isFieldInvalid("password"))}}function k(o,a){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"button",12),t._uU(2," Sign in "),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.attempt>=e.MAX_ATTEMPT)}}function L(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().onForget()}),t._uU(1," Forget Password "),t.qZA()}}let Y=(()=>{class o{constructor(e,r,n,m,p){this.http=e,this.router=r,this.authService=n,this._snackBar=m,this.userService=p,this.user=null,this.attempt=0,this.form=new i.cw({}),this.formSubmitAttempt=!1,this.MAX_ATTEMPT=3,this.errorMessage="",this.isForget=!1,this.hidePwd=!0}ngOnInit(){this.isForget=!1,this.authService.userInfo.subscribe(e=>{this.user=e,this.attempt=0}),this.form=new i.cw({email:new i.NI("",[i.kI.required]),password:new i.NI("",[i.kI.required,i.kI.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-zd$@$!%*?&].{8,}")])}),this.removeForgetValidation()}onLogin(){console.log("Inside login"),this.formSubmitAttempt=!0;let e=new x.n;e.email=this.form.value.email,e.password=this.form.value.password,this.form.valid&&this.authService.authenticate(e).subscribe(r=>{if(console.log("Response Received"),console.log(r),this.authService.userInfo.next(r),sessionStorage.setItem("user",JSON.stringify(r)),sessionStorage.setItem("token",JSON.stringify(r.accessToken)),this.errorMessage="",-1===r.attempt)this.router.navigate(["/users/update"]);else{let n="/";window.location.reload(),this.router.navigate([n]),window.location.reload(),console.log("INSIDE ELSE Auth")}console.log(this.user),this._snackBar.open("Successfully Authenticated")},r=>{console.log("Error Received"),console.log(r),this.errorMessage=r.error,this.authService.userInfo.next(null)})}removeForgetValidation(){var e,r;this.isForget&&(null===(e=this.form.get("password"))||void 0===e||e.clearValidators(),null===(r=this.form.get("password"))||void 0===r||r.updateValueAndValidity())}onForget(){this.removeForgetValidation(),this.userService.forgetPassword(this.form.value.email).subscribe(r=>{console.log("Response Received"),console.log(r)},r=>{console.error("Error Received"),console.error(r)})}isFieldInvalid(e){var r,n,m;return!(null===(r=this.form.get(e))||void 0===r?void 0:r.valid)&&(null===(n=this.form.get(e))||void 0===n?void 0:n.touched)||(null===(m=this.form.get(e))||void 0===m?void 0:m.untouched)&&this.formSubmitAttempt}errorPassword(){var e,r;return(null===(e=this.form.controls.password.errors)||void 0===e?void 0:e.required)?s.B.REQUIRED:(null===(r=this.form.controls.password.errors)||void 0===r?void 0:r.pattern)?s.B.PASSWORD_PATTERN_NOT_MATCH:""}errorEmail(){var e;return(null===(e=this.form.controls.email.errors)||void 0===e?void 0:e.required)?s.B.REQUIRED:""}actionToggle(){return this.isForget?"Already have account":"Forget Password"}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.eN),t.Y36(I.F0),t.Y36(A.e),t.Y36(b.ux),t.Y36(_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-auth"]],decls:25,vars:8,consts:[["cols","1",1,"bg-img"],[1,"mat-card"],[3,"inset"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[4,"ngIf"],["appearance","outline"],["id","emailId","matInput","","type","text","placeholder","Email Id","formControlName","email"],["appearance","outline",4,"ngIf"],[1,"fp",3,"click"],["type","button","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["id","password","matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",1,"eye-icon",3,"click"],["id","submit","type","submit","mat-raised-button","","color","primary",1,"register",3,"disabled"],["type","button","mat-raised-button","","color","warn",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"mat-grid-list",0),t.TgZ(1,"mat-card",1),t.TgZ(2,"mat-card-title"),t._uU(3," Sign in "),t.qZA(),t._UZ(4,"mat-divider",2),t._UZ(5,"br"),t.TgZ(6,"mat-card-content"),t.TgZ(7,"form",3),t.NdJ("ngSubmit",function(){return r.onLogin()}),t.YNc(8,F,2,1,"mat-error",4),t.TgZ(9,"mat-form-field",5),t.TgZ(10,"mat-label"),t._uU(11,"Email Id"),t.qZA(),t._UZ(12,"input",6),t.YNc(13,J,2,1,"mat-error",4),t.TgZ(14,"mat-hint"),t._uU(15," Please enter your email address e.g. exampleusername@xyzdomain.com "),t.qZA(),t.qZA(),t._UZ(16,"br"),t._UZ(17,"br"),t.YNc(18,B,9,5,"mat-form-field",7),t._UZ(19,"br"),t.TgZ(20,"a",8),t.NdJ("click",function(){return r.isForget=!r.isForget}),t._uU(21),t.qZA(),t._UZ(22,"br"),t.YNc(23,k,3,1,"div",4),t.YNc(24,L,2,0,"button",9),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("inset",!0),t.xp6(3),t.Q6J("formGroup",r.form),t.xp6(1),t.Q6J("ngIf",""!==r.errorMessage),t.xp6(5),t.Q6J("ngIf",r.isFieldInvalid("email")),t.xp6(5),t.Q6J("ngIf",!r.isForget),t.xp6(3),t.hij(" ",r.actionToggle()," "),t.xp6(2),t.Q6J("ngIf",!r.isForget),t.xp6(1),t.Q6J("ngIf",r.isForget))},directives:[E.Il,u.a8,u.n5,Z.d,u.dn,i.JL,i.sg,g.O5,d.KE,d.hX,h.Nt,i.Fj,i.JJ,i.u,d.bx,d.TO,v.lW,d.R9,N.Hw],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}section[_ngcontent-%COMP%]{display:table}.example-label[_ngcontent-%COMP%]{display:table-cell;font-size:14px;margin-left:8px;min-width:120px}.example-button-row[_ngcontent-%COMP%]{display:table-cell;width:490px}.example-button-row[_ngcontent-%COMP%]   .mat-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}.example-flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.example-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:120px}mat-grid-tile[_ngcontent-%COMP%]{background:white}.mat-card[_ngcontent-%COMP%]{width:350px;display:block;margin-left:auto;margin-right:auto;text-align:center;padding-top:20px;padding-bottom:10px}mat-card[_ngcontent-%COMP%]{max-width:80%;margin:6em auto;background-color:#fff}mat-form-field[_ngcontent-%COMP%]{width:70%}.bg-img[_ngcontent-%COMP%]{display:block;width:100%;height:100%}.fp[_ngcontent-%COMP%]{color:#000;font-size:15px}.register[_ngcontent-%COMP%]{background-color:#293183;color:#fff;border:none;border-radius:5px;cursor:pointer;width:30%;font-size:16px;margin-right:5px}"]}),o})();function V(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorMessage)}}function $(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.errorOldPassword())}}function G(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-form-field",4),t.TgZ(1,"mat-label"),t._uU(2,"Old Password"),t.qZA(),t._UZ(3,"input",9),t.TgZ(4,"button",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.hideOldPwd=!n.hideOldPwd}),t.TgZ(5,"mat-icon"),t._uU(6),t.qZA(),t.qZA(),t.YNc(7,$,2,1,"mat-error",2),t._UZ(8,"mat-hint"),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("type",e.hideOldPwd?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",e.hideOldPwd),t.xp6(2),t.Oqu(e.hideOldPwd?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",e.isFieldInvalid("oldPassword"))}}function H(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorPassword())}}function z(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorConfirmPassword())}}let j=(()=>{class o{constructor(e,r,n,m){this.formbuilder=e,this.userService=r,this.authService=n,this.router=m,this.user=null,this.form=new i.cw({}),this.formSubmitAttempt=!1,this.retries=0,this.MAX_ATTEMPT=3,this.errorMessage="",this.newUser=!1,this.hideNewPwd=!0,this.hideOldPwd=!0,this.hideConfirmPwd=!0}ngOnInit(){this.authService.userInfo.subscribe(e=>{var r;this.user=e,-1===(null===(r=this.user)||void 0===r?void 0:r.attempt)&&(this.newUser=!0)}),this.form=this.formbuilder.group({oldPassword:["",[i.kI.required]],password:["",[i.kI.required,i.kI.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-zd$@$!%*?&].{8,}")]],confirmPassword:["",[i.kI.required]]},{validator:this.userService.mustMatch("password","confirmPassword")}),this.removeNewUserValidation()}removeNewUserValidation(){var e,r;this.newUser&&(null===(e=this.form.get("oldPassword"))||void 0===e||e.clearValidators(),null===(r=this.form.get("oldPassword"))||void 0===r||r.updateValueAndValidity())}onSubmit(){this.removeNewUserValidation(),this.formSubmitAttempt=!0,this.user&&this.form.valid&&this.userService.updatePasssword(this.user,this.form.value.oldPassword,this.form.value.password).subscribe(n=>{console.log("Response Created"),this.errorMessage=n.message,console.log(n)},n=>{console.error("Error Occured"),console.error(n),this.errorMessage=n.error}),console.log(this.form)}errorOldPassword(){var e;return(null===(e=this.form.controls.oldPassword.errors)||void 0===e?void 0:e.required)?s.B.REQUIRED:""}errorPassword(){var e,r;return(null===(e=this.form.controls.password.errors)||void 0===e?void 0:e.required)?s.B.REQUIRED:(null===(r=this.form.controls.password.errors)||void 0===r?void 0:r.pattern)?s.B.PASSWORD_PATTERN_NOT_MATCH:""}errorConfirmPassword(){var e,r;return(null===(e=this.form.controls.confirmPassword.errors)||void 0===e?void 0:e.required)?s.B.REQUIRED:(null===(r=this.form.controls.confirmPassword.errors)||void 0===r?void 0:r.mustMatch)?s.B.CONFIRM_PASSWORD_NOT_MATCH:""}isFieldInvalid(e){var r,n,m;return!(null===(r=this.form.get(e))||void 0===r?void 0:r.valid)&&(null===(n=this.form.get(e))||void 0===n?void 0:n.touched)||(null===(m=this.form.get(e))||void 0===m?void 0:m.untouched)&&this.formSubmitAttempt}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(_),t.Y36(A.e),t.Y36(I.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-change-password"]],decls:32,vars:14,consts:[[3,"inset"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[4,"ngIf"],["appearance","outline",4,"ngIf"],["appearance","outline"],["matInput","","placeholder","New Passoword","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",1,"eye-icon",3,"click"],["matInput","","placeholder","Confirm Passoword","formControlName","confirmPassword",3,"type"],["type","submit","mat-raised-button","","color","primary"],["matInput","","placeholder","Old Password","formControlName","oldPassword",3,"type"]],template:function(e,r){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Change Password"),t.qZA(),t._UZ(3,"mat-divider",0),t._UZ(4,"br"),t.TgZ(5,"mat-card-content"),t.TgZ(6,"form",1),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.YNc(7,V,2,1,"mat-error",2),t.YNc(8,G,9,5,"mat-form-field",3),t._UZ(9,"br"),t.TgZ(10,"mat-form-field",4),t.TgZ(11,"mat-label"),t._uU(12,"New Password"),t.qZA(),t._UZ(13,"input",5),t.TgZ(14,"button",6),t.NdJ("click",function(){return r.hideNewPwd=!r.hideNewPwd}),t.TgZ(15,"mat-icon"),t._uU(16),t.qZA(),t.qZA(),t.YNc(17,H,2,1,"mat-error",2),t._UZ(18,"mat-hint"),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"mat-form-field",4),t.TgZ(21,"mat-label"),t._uU(22,"Confirm Password"),t.qZA(),t._UZ(23,"input",7),t.TgZ(24,"button",6),t.NdJ("click",function(){return r.hideConfirmPwd=!r.hideConfirmPwd}),t.TgZ(25,"mat-icon"),t._uU(26),t.qZA(),t.qZA(),t.YNc(27,z,2,1,"mat-error",2),t._UZ(28,"mat-hint"),t.qZA(),t._UZ(29,"br"),t.TgZ(30,"button",8),t._uU(31,"Submit"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("inset",!0),t.xp6(3),t.Q6J("formGroup",r.form),t.xp6(1),t.Q6J("ngIf",""!==r.errorMessage),t.xp6(1),t.Q6J("ngIf",!r.newUser),t.xp6(5),t.Q6J("type",r.hideNewPwd?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",r.hideNewPwd),t.xp6(2),t.Oqu(r.hideNewPwd?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",r.isFieldInvalid("password")),t.xp6(6),t.Q6J("type",r.hideConfirmPwd?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",r.hideConfirmPwd),t.xp6(2),t.Oqu(r.hideConfirmPwd?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",r.isFieldInvalid("confirmPassword")))},directives:[u.a8,u.n5,Z.d,u.dn,i.JL,i.sg,g.O5,d.KE,d.hX,h.Nt,i.Fj,i.JJ,i.u,v.lW,d.R9,N.Hw,d.bx,d.TO],styles:["mat-form-field[_ngcontent-%COMP%]{width:60%}mat-card[_ngcontent-%COMP%]{margin:4em auto;background-color:#fff}.mat-card[_ngcontent-%COMP%]{width:350px;height:400px;display:block;margin-left:auto;margin-right:auto;text-align:center;padding-top:20px;padding-bottom:1px}"]}),o})();function R(o){return a=>(a.value&&o.getUserByEmail(a.value).subscribe(e=>{if(e)return a.setErrors({emailInvalid:"Email Id is already present"})}),null)}var c=l(6548),X=l(2458);function W(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorTitle())}}function K(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorFirstName())}}function tt(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorLastName())}}function et(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorEmail())}}function rt(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorBirthDate())}}function ot(o,a){if(1&o&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.roleId),t.xp6(1),t.hij(" ",e.roleName," ")}}function it(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorRole())}}let nt=(()=>{class o{constructor(e){this.userService=e,this.form=new i.cw({}),this.roles=[],this.formSubmitAttempt=!1}ngOnInit(){this.userService.roles.subscribe(e=>{this.roles=e.filter(r=>r.roleId!==c.G.PATIENT&&r.roleId!==c.G.ADMIN)}),console.log(this.roles),this.form=new i.cw({title:new i.NI(null,[i.kI.required]),firstName:new i.NI(null,[i.kI.required,i.kI.minLength(3)]),lastName:new i.NI(null,[i.kI.required,i.kI.minLength(3)]),email:new i.NI(null,[i.kI.required,i.kI.email,R(this.userService)]),birthDate:new i.NI(null,[i.kI.required,this.userService.validateBirthDate]),role:new i.NI(null,[i.kI.required])})}onRegister(){if(console.log("INSIDE onREgister"),this.formSubmitAttempt=!0,console.log(this.form),this.form.valid){const e=new x.n;e.title=this.form.value.title,e.firstName=this.form.value.firstName,e.lastName=this.form.value.lastName,e.email=this.form.value.email,e.birthDate=this.form.value.birthDate,e.roleId=this.form.value.role,e.password="Welcome@123",this.userService.addEmployee(e)}}errorTitle(){var e;return(null===(e=this.form.controls.title.errors)||void 0===e?void 0:e.required)?s.B.TITLE_REQUIRED:""}errorFirstName(){var e,r;return(null===(e=this.form.controls.firstName.errors)||void 0===e?void 0:e.required)?s.B.FIRSTNAME_REQUIRED:(null===(r=this.form.controls.firstName.errors)||void 0===r?void 0:r.minlength)?s.B.ABBREVIATION_NOT_REQUIRED:""}errorLastName(){var e,r;return(null===(e=this.form.controls.lastName.errors)||void 0===e?void 0:e.required)?s.B.LASTNAME_REQUIRED:(null===(r=this.form.controls.lastName.errors)||void 0===r?void 0:r.minlength)?s.B.ABBREVIATION_NOT_REQUIRED:""}errorEmail(){var e,r,n;return(null===(e=this.form.controls.email.errors)||void 0===e?void 0:e.required)||(null===(r=this.form.controls.email.errors)||void 0===r?void 0:r.email)?s.B.EMAIL_REQUIRED:(null===(n=this.form.controls.email.errors)||void 0===n?void 0:n.emailInvalid)?s.B.EMAIL_INVALID:""}errorBirthDate(){var e,r;return(null===(e=this.form.controls.birthDate.errors)||void 0===e?void 0:e.required)?s.B.VALID_DATE_REQUITED:(null===(r=this.form.controls.birthDate.errors)||void 0===r?void 0:r.futureDate)?s.B.VALID_BIRTH_DATE_REQUIRED:""}errorRole(){var e;return(null===(e=this.form.controls.role.errors)||void 0===e?void 0:e.required)?s.B.ROLE_REQUIRED:""}isFieldInvalid(e){var r,n,m;return!(null===(r=this.form.get(e))||void 0===r?void 0:r.valid)&&(null===(n=this.form.get(e))||void 0===n?void 0:n.touched)||(null===(m=this.form.get(e))||void 0===m?void 0:m.untouched)&&this.formSubmitAttempt}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-employee-reg"]],decls:53,vars:9,consts:[[3,"inset"],[3,"formGroup","ngSubmit"],["aria-label","Select an option","formControlName","title"],["value","Mr."],["value","Ms."],["value","Mrs."],["value","Dr."],[4,"ngIf"],["appearance","outline",1,"split"],["matInput","","placeholder","First Name","formControlName","firstName"],["matInput","","placeholder","Last Name","formControlName","lastName"],["appearance","outline",1,"full"],["matInput","","placeholder","Email","formControlName","email"],["matInput","","type","date","placeholder","Birth Date","formControlName","birthDate"],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","primary"],[3,"value"]],template:function(e,r){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Employee Registration"),t.qZA(),t._UZ(3,"mat-divider",0),t._UZ(4,"br"),t.TgZ(5,"mat-card-content"),t.TgZ(6,"form",1),t.NdJ("ngSubmit",function(){return r.onRegister()}),t.TgZ(7,"mat-radio-group",2),t.TgZ(8,"mat-radio-button",3),t._uU(9,"Mr. "),t.qZA(),t.TgZ(10,"mat-radio-button",4),t._uU(11,"Ms. "),t.qZA(),t.TgZ(12,"mat-radio-button",5),t._uU(13,"Mrs. "),t.qZA(),t.TgZ(14,"mat-radio-button",6),t._uU(15,"Dr. "),t.qZA(),t.YNc(16,W,2,1,"mat-error",7),t._UZ(17,"mat-hint"),t.qZA(),t._UZ(18,"br"),t.TgZ(19,"mat-form-field",8),t.TgZ(20,"mat-label"),t._uU(21,"First Name"),t.qZA(),t._UZ(22,"input",9),t.YNc(23,K,2,1,"mat-error",7),t._UZ(24,"mat-hint"),t.qZA(),t.TgZ(25,"mat-form-field",8),t.TgZ(26,"mat-label"),t._uU(27,"Last Name"),t.qZA(),t._UZ(28,"input",10),t.YNc(29,tt,2,1,"mat-error",7),t._UZ(30,"mat-hint"),t.qZA(),t.TgZ(31,"mat-form-field",11),t.TgZ(32,"mat-label"),t._uU(33,"Email Id"),t.qZA(),t._UZ(34,"input",12),t.YNc(35,et,2,1,"mat-error",7),t._UZ(36,"mat-hint"),t.qZA(),t.TgZ(37,"mat-form-field",8),t.TgZ(38,"mat-label"),t._uU(39,"Birth Date"),t.qZA(),t._UZ(40,"input",13),t.YNc(41,rt,2,1,"mat-error",7),t._UZ(42,"mat-hint"),t.qZA(),t.TgZ(43,"mat-form-field",8),t.TgZ(44,"mat-label"),t._uU(45,"Role"),t.qZA(),t.TgZ(46,"mat-select",14),t.YNc(47,ot,2,2,"mat-option",15),t.qZA(),t.YNc(48,it,2,1,"mat-error",7),t._UZ(49,"mat-hint"),t.qZA(),t._UZ(50,"br"),t.TgZ(51,"button",16),t._uU(52," Create Account "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("inset",!0),t.xp6(3),t.Q6J("formGroup",r.form),t.xp6(10),t.Q6J("ngIf",r.isFieldInvalid("title")),t.xp6(7),t.Q6J("ngIf",r.isFieldInvalid("firstName")),t.xp6(6),t.Q6J("ngIf",r.isFieldInvalid("lastName")),t.xp6(6),t.Q6J("ngIf",r.isFieldInvalid("email")),t.xp6(6),t.Q6J("ngIf",r.isFieldInvalid("birthDate")),t.xp6(6),t.Q6J("ngForOf",r.roles),t.xp6(1),t.Q6J("ngIf",r.isFieldInvalid("role")))},directives:[u.a8,u.n5,Z.d,u.dn,i._Y,i.JL,i.sg,w.VQ,i.JJ,i.u,w.U0,g.O5,d.bx,d.KE,d.hX,h.Nt,i.Fj,C.gD,g.sg,v.lW,d.TO,X.ey],styles:["mat-form-field[_ngcontent-%COMP%]{padding:5px}mat-form-field.full[_ngcontent-%COMP%]{width:80%}mat-form-field.split[_ngcontent-%COMP%]{width:40%}mat-card[_ngcontent-%COMP%]{margin:4em auto;background-color:#fff}.mat-card[_ngcontent-%COMP%]{width:600px;display:block;margin-left:auto;margin-right:auto;text-align:center;padding-top:20px}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}"]}),o})();var P=l(6471);function at(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorTitle())}}function st(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorFirstName())}}function lt(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorLastName())}}function mt(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorEmail())}}function dt(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorContactNo())}}function ut(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorBirthDate())}}function ct(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorPassword())}}function ft(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorConfirmPassword())}}let q=(()=>{class o{constructor(e,r,n,m){this.authService=e,this.userService=r,this.fb=n,this.router=m,this.form=new i.cw({}),this.formSubmitAttempt=!1,this.todayDate=new Date,this.hideNewPwd=!0,this.hideConfirmPwd=!0}ngOnInit(){this.todayDate=new Date,this.authService.userInfo.subscribe(e=>{this.user=e}),this.form=this.fb.group({title:["",[i.kI.required]],firstName:["",[i.kI.required,i.kI.minLength(3)]],lastName:["",[i.kI.required,i.kI.minLength(3)]],email:["",[i.kI.required,i.kI.email,R(this.userService)]],birthDate:["",[i.kI.required,this.userService.validateBirthDate]],contactNo:[""],password:["",[i.kI.required,i.kI.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-zd$@$!%*?&].{8,}")]],confirmPassword:["",[i.kI.required,i.kI.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-zd$@$!%*?&].{8,}")]]},{validator:this.userService.mustMatch("password","confirmPassword")})}onRegister(){if(this.formSubmitAttempt=!0,console.log(this.form),this.form.valid){const e=new x.n;e.title=this.form.value.title,e.firstName=this.form.value.firstName,e.lastName=this.form.value.lastName,e.email=this.form.value.email,e.birthDate=this.form.value.birthDate,e.contactNo=this.form.value.contactNo,e.username=this.form.value.username,e.password=this.form.value.password,this.user?this.userService.addPatient(e):(console.log("Signup For new PAtient"),this.userService.signupPatient(e))}}errorTitle(){var e;return(null===(e=this.form.controls.title.errors)||void 0===e?void 0:e.required)?s.B.TITLE_REQUIRED:""}errorFirstName(){var e,r;return(null===(e=this.form.controls.firstName.errors)||void 0===e?void 0:e.required)?s.B.FIRSTNAME_REQUIRED:(null===(r=this.form.controls.firstName.errors)||void 0===r?void 0:r.minlength)?s.B.ABBREVIATION_NOT_REQUIRED:""}errorLastName(){var e,r;return(null===(e=this.form.controls.lastName.errors)||void 0===e?void 0:e.required)?s.B.LASTNAME_REQUIRED:(null===(r=this.form.controls.lastName.errors)||void 0===r?void 0:r.minlength)?s.B.ABBREVIATION_NOT_REQUIRED:""}errorEmail(){var e,r,n;return(null===(e=this.form.controls.email.errors)||void 0===e?void 0:e.required)||(null===(r=this.form.controls.email.errors)||void 0===r?void 0:r.email)?s.B.EMAIL_REQUIRED:(null===(n=this.form.controls.email.errors)||void 0===n?void 0:n.emailInvalid)?s.B.EMAIL_INVALID:""}errorContactNo(){return""}errorBirthDate(){var e,r;return(null===(e=this.form.controls.birthDate.errors)||void 0===e?void 0:e.required)?s.B.VALID_DATE_REQUITED:(null===(r=this.form.controls.birthDate.errors)||void 0===r?void 0:r.futureDate)?s.B.VALID_BIRTH_DATE_REQUIRED:""}errorPassword(){var e,r;return(null===(e=this.form.controls.password.errors)||void 0===e?void 0:e.required)||(null===(r=this.form.controls.password.errors)||void 0===r?void 0:r.pattern)?s.B.FORM_PASSWORD_CRITERIA:""}errorConfirmPassword(){var e,r,n;return(null===(e=this.form.controls.confirmPassword.errors)||void 0===e?void 0:e.required)||(null===(r=this.form.controls.password.errors)||void 0===r?void 0:r.pattern)?s.B.REQUIRED:(null===(n=this.form.controls.confirmPassword.errors)||void 0===n?void 0:n.mustMatch)?s.B.FORM_PASSWORD_NOT_MATCH:""}isFieldInvalid(e){var r,n,m;return!(null===(r=this.form.get(e))||void 0===r?void 0:r.valid)&&(null===(n=this.form.get(e))||void 0===n?void 0:n.touched)||(null===(m=this.form.get(e))||void 0===m?void 0:m.untouched)&&this.formSubmitAttempt}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.e),t.Y36(_),t.Y36(i.qu),t.Y36(I.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-patient-reg"]],decls:70,vars:18,consts:[[3,"inset"],[3,"formGroup","ngSubmit"],["aria-label","Select an option","id","title","formControlName","title"],["value","Mr."],["value","Ms."],["value","Mrs."],["value","Dr."],[4,"ngIf"],["appearance","outline",1,"split"],["matInput","","placeholder","First Name","id","firstName","formControlName","firstName"],["matInput","","placeholder","Last Name","id","lastName","formControlName","lastName"],["appearance","outline",1,"full"],["matInput","","placeholder","Email","id","email","formControlName","email"],["matInput","","placeholder","Contact No.","id","contactNo","formControlName","contactNo"],["matInput","","type","date","placeholder","Birth Date","id","birthDate","formControlName","birthDate"],["matInput","","placeholder","New Passoword","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","",1,"eye-icon",3,"click"],["matInput","","placeholder","Confirm Passoword","formControlName","confirmPassword",3,"type"],["type","submit","mat-raised-button","","color","primary"]],template:function(e,r){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Patient Registration"),t.qZA(),t._UZ(3,"mat-divider",0),t._UZ(4,"br"),t.TgZ(5,"mat-card-content"),t.TgZ(6,"form",1),t.NdJ("ngSubmit",function(){return r.onRegister()}),t.TgZ(7,"mat-radio-group",2),t.TgZ(8,"mat-radio-button",3),t._uU(9,"Mr. "),t.qZA(),t.TgZ(10,"mat-radio-button",4),t._uU(11,"Ms. "),t.qZA(),t.TgZ(12,"mat-radio-button",5),t._uU(13,"Mrs. "),t.qZA(),t.TgZ(14,"mat-radio-button",6),t._uU(15,"Dr. "),t.qZA(),t.YNc(16,at,2,1,"mat-error",7),t._UZ(17,"mat-hint"),t.qZA(),t._UZ(18,"br"),t.TgZ(19,"mat-form-field",8),t.TgZ(20,"mat-label"),t._uU(21,"First Name"),t.qZA(),t._UZ(22,"input",9),t.YNc(23,st,2,1,"mat-error",7),t._UZ(24,"mat-hint"),t.qZA(),t.TgZ(25,"mat-form-field",8),t.TgZ(26,"mat-label"),t._uU(27,"Last Name"),t.qZA(),t._UZ(28,"input",10),t.YNc(29,lt,2,1,"mat-error",7),t._UZ(30,"mat-hint"),t.qZA(),t.TgZ(31,"mat-form-field",11),t.TgZ(32,"mat-label"),t._uU(33,"Email Id"),t.qZA(),t._UZ(34,"input",12),t.YNc(35,mt,2,1,"mat-error",7),t._UZ(36,"mat-hint"),t.qZA(),t.TgZ(37,"mat-form-field",8),t.TgZ(38,"mat-label"),t._uU(39,"Contact No."),t.qZA(),t._UZ(40,"input",13),t.YNc(41,dt,2,1,"mat-error",7),t._UZ(42,"mat-hint"),t.qZA(),t.TgZ(43,"mat-form-field",8),t.TgZ(44,"mat-label"),t._uU(45,"Birth Date"),t.qZA(),t._UZ(46,"input",14),t.YNc(47,ut,2,1,"mat-error",7),t._UZ(48,"mat-hint"),t.qZA(),t.TgZ(49,"mat-form-field",8),t.TgZ(50,"mat-label"),t._uU(51,"New Password"),t.qZA(),t._UZ(52,"input",15),t.TgZ(53,"button",16),t.NdJ("click",function(){return r.hideNewPwd=!r.hideNewPwd}),t.TgZ(54,"mat-icon"),t._uU(55),t.qZA(),t.qZA(),t.YNc(56,ct,2,1,"mat-error",7),t._UZ(57,"mat-hint"),t.qZA(),t.TgZ(58,"mat-form-field",8),t.TgZ(59,"mat-label"),t._uU(60,"Confirm Password"),t.qZA(),t._UZ(61,"input",17),t.TgZ(62,"button",16),t.NdJ("click",function(){return r.hideConfirmPwd=!r.hideConfirmPwd}),t.TgZ(63,"mat-icon"),t._uU(64),t.qZA(),t.qZA(),t.YNc(65,ft,2,1,"mat-error",7),t._UZ(66,"mat-hint"),t.qZA(),t._UZ(67,"br"),t.TgZ(68,"button",18),t._uU(69," Create Account "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("inset",!0),t.xp6(3),t.Q6J("formGroup",r.form),t.xp6(10),t.Q6J("ngIf",r.isFieldInvalid("title")),t.xp6(7),t.Q6J("ngIf",r.isFieldInvalid("firstName")),t.xp6(6),t.Q6J("ngIf",r.isFieldInvalid("lastName")),t.xp6(6),t.Q6J("ngIf",r.isFieldInvalid("email")),t.xp6(6),t.Q6J("ngIf",r.isFieldInvalid("contactNo")),t.xp6(6),t.Q6J("ngIf",r.isFieldInvalid("birthDate")),t.xp6(5),t.Q6J("type",r.hideNewPwd?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",r.hideNewPwd),t.xp6(2),t.Oqu(r.hideNewPwd?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",r.isFieldInvalid("password")),t.xp6(5),t.Q6J("type",r.hideConfirmPwd?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",r.hideConfirmPwd),t.xp6(2),t.Oqu(r.hideConfirmPwd?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",r.isFieldInvalid("confirmPassword")))},directives:[u.a8,u.n5,Z.d,u.dn,i._Y,i.JL,i.sg,w.VQ,i.JJ,i.u,w.U0,g.O5,d.bx,d.KE,d.hX,h.Nt,i.Fj,v.lW,d.R9,N.Hw,d.TO],styles:["mat-form-field[_ngcontent-%COMP%]{padding:5px}mat-form-field.full[_ngcontent-%COMP%]{width:80%}mat-form-field.split[_ngcontent-%COMP%]{width:40%}mat-card[_ngcontent-%COMP%]{margin:1em auto;background-color:#fff}.mat-card[_ngcontent-%COMP%]{width:600px;display:block;margin-left:auto;margin-right:auto;text-align:center}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.example-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]}),o})();var O=l(7082);const pt=[{path:"auth",component:Y,canActivate:[O.a]},{path:"employee",component:nt,canActivate:[P.d],data:{role:[c.G.ADMIN]}},{path:"patient",component:q,canActivate:[P.d],data:{role:[c.G.PHYSICIAN,c.G.NURSE,c.G.ADMIN]}},{path:"signup",component:q},{path:"update",component:j,canActivate:[P.d],data:{role:[c.G.PATIENT,c.G.PHYSICIAN,c.G.NURSE,c.G.ADMIN]}}];let gt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[I.Bz.forChild(pt)],I.Bz]}),o})();var ht=l(767);let _t=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[A.e,_,P.d,O.a,{provide:b.Ve,useValue:{duration:1500}},{provide:T.TP,useClass:ht.s,multi:!0}],imports:[[g.ez,d.lN,h.c,i.UX,T.JF,C.LD,M.Nh,E.N6,u.QW,v.ot,N.Ps,S.g0,Z.t,w.Fk,D.FA,gt,b.ZX]]}),o})()}}]);